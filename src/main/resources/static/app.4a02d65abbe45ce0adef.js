!function(e){function n(n){for(var r,i,c=n[0],s=n[1],l=n[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(u&&u(n);p.length;)p.shift()();return o.push.apply(o,l||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],r=!0,c=1;c<t.length;c++){var s=t[c];0!==a[s]&&(r=!1)}r&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var r={},a={2:0},o=[];function i(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=r,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)i.d(t,r,function(n){return e[n]}.bind(null,r));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=n,c=c.slice();for(var l=0;l<c.length;l++)n(c[l]);var u=s;o.push([857,24,20,44,39,14,36,17,40,19,21,5,30,34,6,50,12,11,48,33,47,27,13,32,46,29,28,26,10,8,38,52,43,22,51,25,37,18,7,31,35,42,41,23,16,45,49,53,9,15,0,1,4,3]),t()}({124:function(e,n,t){"use strict";t.d(n,"b",(function(){return B})),t.d(n,"a",(function(){return V}));var r=t(52),a=t.n(r),o=t(85),i=t.n(o),c=t(21),s=t.n(c),l=t(94),u=t.n(l),d=t(93),p=t.n(d),f=t(0),m=t.n(f),b=t(28),v=t(49),g=t(385),y=t(4),h=t.n(y),E=t(6),x=t(8);t(128);function w(){var e=h()(["\n  &:focus {\n    border-color: #6f8f9d;\n    box-shadow: none;\n  }\n"]);return w=function(){return e},e}function O(){var e=h()(["\n  //padding: ","px;\n  // margin-bottom: ","px;\n"]);return O=function(){return e},e}var j=x.Form.Input,S=E.b.div(O(),(function(e){return e.theme.spacing(8)}),(function(e){return e.theme.spacing(4)})),C=Object(E.b)(j)(w()),k=function(e){var n=e.state;e.dispatch;return m.a.createElement(m.a.Fragment,null,m.a.createElement(S,null,m.a.createElement(C,{id:"filled-full-width",name:"email",placeholder:"Email",label:"Email",variant:"filled",value:n.email,disabled:!0})))},D=t(26),A=t(81),F=t(125),P=t(873),M=t(872),T=t(84),I=t(76),R=t(483),_=t(80);function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){u()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}x.Form.Checkbox;var q=x.Form.Field;x.Form.Control,x.Form.Radio;function z(e){return m.a.createElement(M.a,p()({elevation:6,variant:"filled"},e))}var K=Object(F.a)().shape({alias:Object(F.b)().required("Alias is required and should be between 2 and 15 characters"),firstName:Object(F.b)().required("First name is required and should be between 2 and 15 characters"),lastName:Object(F.b)().required("Last name is required and should be between 2 and 15 characters"),line1:Object(F.b)().required("Address is required and should be between 2 and 15 characters"),mobile:Object(F.b)().required("A valid mobile number is required").matches(/(968[7,9]{1}[0-9]{7})/,"A valid mobile number is required")}),B={SELECT:"SELECT",ADD:"ADD",EDIT:"EDIT"};function H(e,n){switch(console.log(n),n.type){case"SELECT_NEW_ADDRESS":return L({},e,{addressType:B.EDIT,showMap:!0});case"SELECT_SAVED_ADDRESS":return L({},e,{addressType:B.SELECT,selectedAddress:n.payload});case"MAP_ADDRESS_START":return L({},e,{showMap:!0});case"MAP_ADDRESS_END":return L({},e,{showMap:!1,addressFromMap:L({},n.payload)});case"SHOW_ERROR":return L({},e,{error:!0,errMsg:n.payload});case"SET_MOBILE":return L({},e,{mobile:n.payload});case"INIT_ADDRESS":var t=n.payload;return L({},e,{mobile:t.mobile?t.mobile:"",initPosition:!(!t.lng||!t.lat)&&{lng:t.lng,lat:t.lat},addressType:e.selectedAddress?B.SELECT:t&&t.plusCode?B.EDIT:B.ADD,addressFromMap:!!t.plusCode&&{lng:t.lng?t.lng:null,lat:t.lat?t.lat:null,plusCode:t.plusCode?t.plusCode:null,city:t.city?t.city:null,address:t.line1?t.line1:null}});default:throw new Error("Unknown step")}}var V=function(e){var n=e.state.cart.deliveryAddress,t={deliveryAddress:n,addresses:e.state.cart.addresses,email:e.state.cart.email,showMap:!1,initPosition:!1,selectedAddress:e.state.cart.deliveryAddressId,addressType:e.state.cart.deliveryAddressId?B.SELECT:B.ADD,error:!1},r=Object(f.useReducer)(H,t),o=s()(r,2),c=o[0],l=o[1];Object(f.useEffect)((function(){n&&l({type:"INIT_ADDRESS",payload:n})}),[]);var u=Object(b.b)({defaultValues:L({},n)}),d=u.register,p=u.handleSubmit,y=(u.watch,u.errors,u.control),h=Object(v.a)(g.a),E=s()(h,2),w=E[0],O=E[1],j=O.loading,S=(O.data2,m.a.useState(!1)),C=s()(S,2),F=(C[0],C[1]),M=Object(f.useState)({value:"ship"}),N=s()(M,2),V=N[0],U=N[1],W=function(e,n){"clickaway"!==n&&F(!1)},J=function(){var n=i()(a.a.mark((function n(t){var r,o,s,u,d,p;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!j){n.next=2;break}return n.abrupt("return");case 2:if(r={id:null,firstName:t.firstName,lastName:t.lastName,line1:c.addressFromMap?c.addressFromMap.address:t.line1,line2:t.line2,city:c.addressFromMap?c.addressFromMap.city:t.city,country:"Oman",postalCode:t.postalCode,mobile:c.mobile,save:t.save,alias:t.alias,lat:c.addressFromMap?c.addressFromMap.lat:null,lng:c.addressFromMap?c.addressFromMap.lng:null,plusCode:c.addressFromMap?c.addressFromMap.plusCode:null},o=c.email,s=e.state.cart.secureKey,c.addressType!==B.SELECT){n.next=15;break}return u=c.selectedAddress,c.selectedAddress||(u=c.addresses[0].id),n.next=10,w({variables:{email:o,address:{id:u},secureKey:s}});case 10:return d=n.sent,p=d.data.setInfo,console.log(p),p&&e.dispatch({type:"SAVE_INFO",payload:p}),n.abrupt("return",!0);case 15:return console.log("validating schema"),n.next=18,K.validate(r).then(i()(a.a.mark((function n(){var t,i;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w({variables:{email:o,address:r,secureKey:s}});case 2:t=n.sent,(i=t.data.setInfo)&&e.dispatch({type:"SAVE_INFO",payload:i});case 5:case"end":return n.stop()}}),n)})))).catch((function(e){return l({type:"SHOW_ERROR",payload:e.message}),F(!0),!0}));case 18:return n.abrupt("return",!1);case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return m.a.createElement(m.a.Fragment,null,j&&m.a.createElement("p",null,"Loading..."),m.a.createElement(_.a,null,m.a.createElement(x.Heading,{subtitle:!0,size:6,style:{margin:"0px"}},"Contact Information")),m.a.createElement("form",{onSubmit:p(J)},m.a.createElement(_.c,null,m.a.createElement(k,{state:c,dispatch:l})),m.a.createElement(q,null),m.a.createElement(_.b,{subtitle:!0,size:6},"Delivery method"),m.a.createElement(_.d,{style:{borderRadius:"5px 5px 5px 5px "}},m.a.createElement(_.e,{name:"ship",onChange:function(e){return U({value:"ship"})},checked:"ship"===V.value,style:{color:"ship"===V.value?"#6f8f9d":"black"}},m.a.createElement(x.Icon,{style:{marginLeft:"5px",marginRight:"5px"}},m.a.createElement(T.a,{icon:I.d})),"Ship")),m.a.createElement(_.b,{subtitle:!0,size:6},"Shipping address"),m.a.createElement(R.a,{state:c,dispatch:l,register:d,control:y}),m.a.createElement(_.a,null,m.a.createElement(_.f,{onClick:function(){return window.history.back()}},m.a.createElement(x.Icon,null,m.a.createElement(T.a,{icon:I.a}))," Return to cart"),m.a.createElement(D.a,null,e.state.cart.items&&e.state.cart.items.length?m.a.createElement(D.k,{type:"submit",variant:"contained"},j?m.a.createElement(A.a,null):m.a.createElement("span",null,"Contiune to shipping")):m.a.createElement(D.k,{type:"submit",variant:"contained",disabled:!0,color:"primary"},"Next")))),m.a.createElement(P.a,{open:c.error,autoHideDuration:6e3,onClose:W},m.a.createElement(z,{onClose:W,severity:"error"},c.errMsg)))}},493:function(e,n,t){"use strict";t.d(n,"a",(function(){return R}));var r=t(52),a=t.n(r),o=t(85),i=t.n(o),c=t(21),s=t.n(c),l=t(4),u=t.n(l),d=t(0),p=t.n(d),f=t(6),m=t(28),b=t(494),v=t(49),g=t(500),y=t(501),h=t(26),E=t(81),x=t(305),w=t(527),O=t(502),j=t.n(O),S=t(8);function C(){var e=u()(["\n  border: 1px solid #999999;\n  border-radius: 5px 5px 0 0;\n  :nth-child(2) {\n    border-top: none;\n    border-radius: 0 0 5px 5px;\n  }\n"]);return C=function(){return e},e}function k(){var e=u()(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: row;\n  justify-content: flex-end;\n  padding: 15px 0px;\n"]);return k=function(){return e},e}function D(){var e=u()(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return D=function(){return e},e}function A(){var e=u()(["\n  //padding: ","px;\n  margin-bottom: ","px;\n"]);return A=function(){return e},e}var F=S.Form.Radio,P=(f.b.div(A(),(function(e){return e.theme.spacing(8)}),(function(e){return e.theme.spacing(4)})),Object(f.b)(F)(D())),M=Object(f.b)(S.Container)(k()),T=Object(f.b)(S.Card)(C()),I=j()((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var R=function(e){var n=e.state,r=e.dispatch,o=I(),c=Object(m.b)(),l=(c.register,c.handleSubmit),u=Object(v.b)(y.a,{variables:{currency:n.cart.currency}}),f=u.data,O=(u.error,u.loading),j=Object(v.a)(g.a),C=s()(j,2),k=C[0],D=C[1],A=(D.loading2,D.data2,Object(d.useState)()),F=s()(A,2),R=F[0],_=F[1],N=Object(d.useState)(n.cart.name),L=s()(N,2),q=L[0],z=(L[1],p.a.useState(!1)),K=s()(z,2),B=K[0],H=K[1],V=p.a.useState(!1),U=s()(V,2),W=U[0],J=U[1],G=function(){var e=i()(a.a.mark((function e(){var n,t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("In onsubmit"),console.log(f),H(!0),e.next=5,k({variables:{token:null,ref:R,secureKey:secureKey}});case 5:n=e.sent,(t=n.data.processPayment).redirect?window.location=t.redirect:alert("Payment unsuccessful");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=i()(a.a.mark((function e(n){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("In handleProcessPayment"),J(!0),!W){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,k({variables:{token:n,ref:R,secureKey:secureKey}});case 6:return t=e.sent,"REDIRECT"==(r=t.data.processPayment).status?window.location=r.redirect:"DECLINED"==r.status&&(alert(r.message),window.location.reload()),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return O?"loading":p.a.createElement(p.a.Fragment,null,p.a.createElement(x.a,{className:o.backdrop,open:B},p.a.createElement(w.a,{color:"inherit"})),p.a.createElement(S.Heading,{size:5},"Payment Step"),p.a.createElement(S.Container,null,f.paymentMethods.map((function(e,n){return p.a.createElement(T,{key:n,onClick:function(){return _(e.ref)}},p.a.createElement(S.Card.Content,null,p.a.createElement(P,{checked:R===e.ref,onChange:function(){return _(e.ref)},value:e.ref,key:e.ref,name:e.name},"  ",e.image&&p.a.createElement(S.Image,{src:t(804)("./"+e.image)}),!e.image&&p.a.createElement("span",null,e.name," ")),"checkoutcom"==e.ref&&R===e.ref&&p.a.createElement(b.a,{handleProcessPayment:Q,customerName:q}),"bankwire"==e.ref&&R===e.ref&&p.a.createElement(S.Content,null,p.a.createElement("br",null),"Please transfer your payment to our Bank Muscat Account",p.a.createElement("br",null),p.a.createElement("code",null,"0333015845260014 (Name: BADAL TRAD)"),p.a.createElement("br",null),"Then confirm by sending us your Bank receipt with your order number to ",p.a.createElement("a",{href:"mailto:help@badals.com"},"help@badals.com"))))}))),p.a.createElement(M,null,p.a.createElement("form",{onSubmit:l(G)},"checkoutcom"!=R&&p.a.createElement(p.a.Fragment,null,p.a.createElement(h.k,{type:"submit",variant:"contained"},"Complete Order"),p.a.createElement(h.k,{variant:"contained",onClick:function(){return r({type:"PREV"})}},O?p.a.createElement(E.a,null):p.a.createElement("span",null,"Back"))))))}},769:function(e,n,t){var r={"./american express.svg":770,"./card-error.svg":771,"./card.svg":380,"./cvv-error.svg":772,"./cvv.svg":381,"./dinersclub.svg":773,"./discover.svg":774,"./error.svg":775,"./exp-date-error.svg":776,"./exp-date.svg":382,"./jcb.svg":777,"./loading.svg":778,"./mada.svg":779,"./maestro.svg":780,"./mastercard.svg":781,"./visa.svg":782};function a(e){var n=o(e);return t(n)}function o(e){if(!t.o(r,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=769},80:function(e,n,t){"use strict";t.d(n,"c",(function(){return y})),t.d(n,"d",(function(){return h})),t.d(n,"b",(function(){return E})),t.d(n,"e",(function(){return x})),t.d(n,"a",(function(){return w})),t.d(n,"f",(function(){return O}));var r=t(4),a=t.n(r),o=t(6),i=t(8);function c(){var e=a()(["\n  color: #bae8ff;\n  font-size: 14px;\n  cursor: pointer;\n  :hover {\n    color: #33bbff;\n  }\n"]);return c=function(){return e},e}function s(){var e=a()(["\n  color: #999999;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return s=function(){return e},e}function l(){var e=a()(["\n  border: none;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  color: #999999;\n  padding: 0px;\n"]);return l=function(){return e},e}function u(){var e=a()(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]);return u=function(){return e},e}function d(){var e=a()(["\n    height: auto;\n    display: flex; \n    flex-direction: row; \n    align-items: center; \n    font-weight: 400; \n    font-size: 15px;\n"]);return d=function(){return e},e}function p(){var e=a()(["\n  margin-top: 15px;\n  label {\n    height: auto;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    font-weight: 300;\n  }\n"]);return p=function(){return e},e}function f(){var e=a()(["\n    margin-bottom: 15px;\n    margin-top: 40px;\n"]);return f=function(){return e},e}function m(){var e=a()(["\n   width : 100%;\n   border: 1px solid #e6e6e6;\n   padding: 5px;\n   padding-left: 15px;\n"]);return m=function(){return e},e}function b(){var e=a()(["\n  //padding: ","px;\n  // margin-bottom: ","px;\n"]);return b=function(){return e},e}i.Form.Checkbox,i.Form.Field;var v=i.Form.Control,g=i.Form.Radio,y=o.b.div(b(),(function(e){return e.theme.spacing(8)}),(function(e){return e.theme.spacing(4)})),h=o.b.div(m()),E=Object(o.b)(i.Heading)(f()),x=(Object(o.b)(v)(p()),Object(o.b)(g)(d())),w=Object(o.b)(i.Container)(u()),O=Object(o.b)(i.Button)(l());o.b.p(s()),o.b.span(c())},81:function(e,n,t){"use strict";var r=t(4),a=t.n(r),o=t(0),i=t.n(o),c=t(6);function s(){var e=a()(["\n  width: 24px;\n  height: 24px;\n  border: 4px solid #ffffff;\n  /* border-top: 4px solid #009e7f; */\n  border-top: 3px solid ",";\n  border-radius: 50%;\n  transition-property: transform;\n  animation-name: ",";\n  animation-duration: 1.2s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n  \n"]);return s=function(){return e},e}function l(){var e=a()(["\n  from {transform: rotate(0deg);}\n  to {transform: rotate(360deg);}\n"]);return l=function(){return e},e}var u=Object(c.c)(l()),d=c.b.div(s(),(function(e){return e.color?e.color:"#009e7f"}),u);n.a=function(e){return i.a.createElement(d,e)}}});